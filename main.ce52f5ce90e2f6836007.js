!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=12)}([function(e,t,r){"use strict";var n=r(7),o=r(10),i=[].slice,a=["keyword","gray","hex"],s={};Object.keys(o).forEach((function(e){s[i.call(o[e].labels).sort().join("")]=e}));var c={};function l(e,t){if(!(this instanceof l))return new l(e,t);if(t&&t in a&&(t=null),t&&!(t in o))throw new Error("Unknown model: "+t);var r,u;if(null==e)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof l)this.model=e.model,this.color=e.color.slice(),this.valpha=e.valpha;else if("string"==typeof e){var h=n.get(e);if(null===h)throw new Error("Unable to parse color from string: "+e);this.model=h.model,u=o[this.model].channels,this.color=h.value.slice(0,u),this.valpha="number"==typeof h.value[u]?h.value[u]:1}else if(e.length){this.model=t||"rgb",u=o[this.model].channels;var p=i.call(e,0,u);this.color=f(p,u),this.valpha="number"==typeof e[u]?e[u]:1}else if("number"==typeof e)e&=16777215,this.model="rgb",this.color=[e>>16&255,e>>8&255,255&e],this.valpha=1;else{this.valpha=1;var d=Object.keys(e);"alpha"in e&&(d.splice(d.indexOf("alpha"),1),this.valpha="number"==typeof e.alpha?e.alpha:0);var y=d.sort().join("");if(!(y in s))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=s[y];var g=o[this.model].labels,b=[];for(r=0;r<g.length;r++)b.push(e[g[r]]);this.color=f(b)}if(c[this.model])for(u=o[this.model].channels,r=0;r<u;r++){var v=c[this.model][r];v&&(this.color[r]=v(this.color[r]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function u(e,t,r){return(e=Array.isArray(e)?e:[e]).forEach((function(e){(c[e]||(c[e]=[]))[t]=r})),e=e[0],function(n){var o;return arguments.length?(r&&(n=r(n)),(o=this[e]()).color[t]=n,o):(o=this[e]().color[t],r&&(o=r(o)),o)}}function h(e){return function(t){return Math.max(0,Math.min(e,t))}}function p(e){return Array.isArray(e)?e:[e]}function f(e,t){for(var r=0;r<t;r++)"number"!=typeof e[r]&&(e[r]=0);return e}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(e){var t=this.model in n.to?this:this.rgb(),r=1===(t=t.round("number"==typeof e?e:1)).valpha?t.color:t.color.concat(this.valpha);return n.to[t.model](r)},percentString:function(e){var t=this.rgb().round("number"==typeof e?e:1),r=1===t.valpha?t.color:t.color.concat(this.valpha);return n.to.rgb.percent(r)},array:function(){return 1===this.valpha?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var e={},t=o[this.model].channels,r=o[this.model].labels,n=0;n<t;n++)e[r[n]]=this.color[n];return 1!==this.valpha&&(e.alpha=this.valpha),e},unitArray:function(){var e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,1!==this.valpha&&e.push(this.valpha),e},unitObject:function(){var e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,1!==this.valpha&&(e.alpha=this.valpha),e},round:function(e){return e=Math.max(e||0,0),new l(this.color.map(function(e){return function(t){return function(e,t){return Number(e.toFixed(t))}(t,e)}}(e)).concat(this.valpha),this.model)},alpha:function(e){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,e))),this.model):this.valpha},red:u("rgb",0,h(255)),green:u("rgb",1,h(255)),blue:u("rgb",2,h(255)),hue:u(["hsl","hsv","hsl","hwb","hcg"],0,(function(e){return(e%360+360)%360})),saturationl:u("hsl",1,h(100)),lightness:u("hsl",2,h(100)),saturationv:u("hsv",1,h(100)),value:u("hsv",2,h(100)),chroma:u("hcg",1,h(100)),gray:u("hcg",2,h(100)),white:u("hwb",1,h(100)),wblack:u("hwb",2,h(100)),cyan:u("cmyk",0,h(100)),magenta:u("cmyk",1,h(100)),yellow:u("cmyk",2,h(100)),black:u("cmyk",3,h(100)),x:u("xyz",0,h(100)),y:u("xyz",1,h(100)),z:u("xyz",2,h(100)),l:u("lab",0,h(100)),a:u("lab",1),b:u("lab",2),keyword:function(e){return arguments.length?new l(e):o[this.model].keyword(this.color)},hex:function(e){return arguments.length?new l(e):n.to.hex(this.rgb().round().color)},rgbNumber:function(){var e=this.rgb().color;return(255&e[0])<<16|(255&e[1])<<8|255&e[2]},luminosity:function(){for(var e=this.rgb().color,t=[],r=0;r<e.length;r++){var n=e[r]/255;t[r]=n<=.03928?n/12.92:Math.pow((n+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),r=e.luminosity();return t>r?(t+.05)/(r+.05):(r+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},isDark:function(){var e=this.rgb().color;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var e=this.rgb(),t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten:function(e){var t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken:function(e){var t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate:function(e){var t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate:function(e){var t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten:function(e){var t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken:function(e){var t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale:function(){var e=this.rgb().color,t=.3*e[0]+.59*e[1]+.11*e[2];return l.rgb(t,t,t)},fade:function(e){return this.alpha(this.valpha-this.valpha*e)},opaquer:function(e){return this.alpha(this.valpha+this.valpha*e)},rotate:function(e){var t=this.hsl(),r=t.color[0];return r=(r=(r+e)%360)<0?360+r:r,t.color[0]=r,t},mix:function(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);var r=e.rgb(),n=this.rgb(),o=void 0===t?.5:t,i=2*o-1,a=r.alpha()-n.alpha(),s=((i*a==-1?i:(i+a)/(1+i*a))+1)/2,c=1-s;return l.rgb(s*r.red()+c*n.red(),s*r.green()+c*n.green(),s*r.blue()+c*n.blue(),r.alpha()*o+n.alpha()*(1-o))}},Object.keys(o).forEach((function(e){if(-1===a.indexOf(e)){var t=o[e].channels;l.prototype[e]=function(){if(this.model===e)return new l(this);if(arguments.length)return new l(arguments,e);var r="number"==typeof arguments[t]?t:this.valpha;return new l(p(o[this.model][e].raw(this.color)).concat(r),e)},l[e]=function(r){return"number"==typeof r&&(r=f(i.call(arguments),t)),new l(r,e)}}})),e.exports=l},function(e,t,r){"use strict";e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(e,t,r){var n=r(1),o={};for(var i in n)n.hasOwnProperty(i)&&(o[n[i]]=i);var a=e.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var s in a)if(a.hasOwnProperty(s)){if(!("channels"in a[s]))throw new Error("missing channels property: "+s);if(!("labels"in a[s]))throw new Error("missing channel labels property: "+s);if(a[s].labels.length!==a[s].channels)throw new Error("channel and label counts mismatch: "+s);var c=a[s].channels,l=a[s].labels;delete a[s].channels,delete a[s].labels,Object.defineProperty(a[s],"channels",{value:c}),Object.defineProperty(a[s],"labels",{value:l})}a.rgb.hsl=function(e){var t,r,n=e[0]/255,o=e[1]/255,i=e[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),c=s-a;return s===a?t=0:n===s?t=(o-i)/c:o===s?t=2+(i-n)/c:i===s&&(t=4+(n-o)/c),(t=Math.min(60*t,360))<0&&(t+=360),r=(a+s)/2,[t,100*(s===a?0:r<=.5?c/(s+a):c/(2-s-a)),100*r]},a.rgb.hsv=function(e){var t,r,n,o,i,a=e[0]/255,s=e[1]/255,c=e[2]/255,l=Math.max(a,s,c),u=l-Math.min(a,s,c),h=function(e){return(l-e)/6/u+.5};return 0===u?o=i=0:(i=u/l,t=h(a),r=h(s),n=h(c),a===l?o=n-r:s===l?o=1/3+t-n:c===l&&(o=2/3+r-t),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*l]},a.rgb.hwb=function(e){var t=e[0],r=e[1],n=e[2];return[a.rgb.hsl(e)[0],100*(1/255*Math.min(t,Math.min(r,n))),100*(n=1-1/255*Math.max(t,Math.max(r,n)))]},a.rgb.cmyk=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255;return[100*((1-r-(t=Math.min(1-r,1-n,1-o)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-o-t)/(1-t)||0),100*t]},a.rgb.keyword=function(e){var t=o[e];if(t)return t;var r,i,a,s=1/0;for(var c in n)if(n.hasOwnProperty(c)){var l=n[c],u=(i=e,a=l,Math.pow(i[0]-a[0],2)+Math.pow(i[1]-a[1],2)+Math.pow(i[2]-a[2],2));u<s&&(s=u,r=c)}return r},a.keyword.rgb=function(e){return n[e]},a.rgb.xyz=function(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*r+.0722*n),100*(.0193*t+.1192*r+.9505*n)]},a.rgb.lab=function(e){var t=a.rgb.xyz(e),r=t[0],n=t[1],o=t[2];return n/=100,o/=108.883,r=(r/=95.047)>.008856?Math.pow(r,1/3):7.787*r+16/116,[116*(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116)-16,500*(r-n),200*(n-(o=o>.008856?Math.pow(o,1/3):7.787*o+16/116))]},a.hsl.rgb=function(e){var t,r,n,o,i,a=e[0]/360,s=e[1]/100,c=e[2]/100;if(0===s)return[i=255*c,i,i];t=2*c-(r=c<.5?c*(1+s):c+s-c*s),o=[0,0,0];for(var l=0;l<3;l++)(n=a+1/3*-(l-1))<0&&n++,n>1&&n--,i=6*n<1?t+6*(r-t)*n:2*n<1?r:3*n<2?t+(r-t)*(2/3-n)*6:t,o[l]=255*i;return o},a.hsl.hsv=function(e){var t=e[0],r=e[1]/100,n=e[2]/100,o=r,i=Math.max(n,.01);return r*=(n*=2)<=1?n:2-n,o*=i<=1?i:2-i,[t,100*(0===n?2*o/(i+o):2*r/(n+r)),100*((n+r)/2)]},a.hsv.rgb=function(e){var t=e[0]/60,r=e[1]/100,n=e[2]/100,o=Math.floor(t)%6,i=t-Math.floor(t),a=255*n*(1-r),s=255*n*(1-r*i),c=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,c,a];case 1:return[s,n,a];case 2:return[a,n,c];case 3:return[a,s,n];case 4:return[c,a,n];case 5:return[n,a,s]}},a.hsv.hsl=function(e){var t,r,n,o=e[0],i=e[1]/100,a=e[2]/100,s=Math.max(a,.01);return n=(2-i)*a,r=i*s,[o,100*(r=(r/=(t=(2-i)*s)<=1?t:2-t)||0),100*(n/=2)]},a.hwb.rgb=function(e){var t,r,n,o,i,a,s,c=e[0]/360,l=e[1]/100,u=e[2]/100,h=l+u;switch(h>1&&(l/=h,u/=h),n=6*c-(t=Math.floor(6*c)),0!=(1&t)&&(n=1-n),o=l+n*((r=1-u)-l),t){default:case 6:case 0:i=r,a=o,s=l;break;case 1:i=o,a=r,s=l;break;case 2:i=l,a=r,s=o;break;case 3:i=l,a=o,s=r;break;case 4:i=o,a=l,s=r;break;case 5:i=r,a=l,s=o}return[255*i,255*a,255*s]},a.cmyk.rgb=function(e){var t=e[0]/100,r=e[1]/100,n=e[2]/100,o=e[3]/100;return[255*(1-Math.min(1,t*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},a.xyz.rgb=function(e){var t,r,n,o=e[0]/100,i=e[1]/100,a=e[2]/100;return r=-.9689*o+1.8758*i+.0415*a,n=.0557*o+-.204*i+1.057*a,t=(t=3.2406*o+-1.5372*i+-.4986*a)>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:12.92*r,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(r=Math.min(Math.max(0,r),1)),255*(n=Math.min(Math.max(0,n),1))]},a.xyz.lab=function(e){var t=e[0],r=e[1],n=e[2];return r/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,1/3):7.787*t+16/116,[116*(r=r>.008856?Math.pow(r,1/3):7.787*r+16/116)-16,500*(t-r),200*(r-(n=n>.008856?Math.pow(n,1/3):7.787*n+16/116))]},a.lab.xyz=function(e){var t,r,n,o=e[0];t=e[1]/500+(r=(o+16)/116),n=r-e[2]/200;var i=Math.pow(r,3),a=Math.pow(t,3),s=Math.pow(n,3);return r=i>.008856?i:(r-16/116)/7.787,t=a>.008856?a:(t-16/116)/7.787,n=s>.008856?s:(n-16/116)/7.787,[t*=95.047,r*=100,n*=108.883]},a.lab.lch=function(e){var t,r=e[0],n=e[1],o=e[2];return(t=360*Math.atan2(o,n)/2/Math.PI)<0&&(t+=360),[r,Math.sqrt(n*n+o*o),t]},a.lch.lab=function(e){var t,r=e[0],n=e[1];return t=e[2]/360*2*Math.PI,[r,n*Math.cos(t),n*Math.sin(t)]},a.rgb.ansi16=function(e){var t=e[0],r=e[1],n=e[2],o=1 in arguments?arguments[1]:a.rgb.hsv(e)[2];if(0===(o=Math.round(o/50)))return 30;var i=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(t/255));return 2===o&&(i+=60),i},a.hsv.ansi16=function(e){return a.rgb.ansi16(a.hsv.rgb(e),e[2])},a.rgb.ansi256=function(e){var t=e[0],r=e[1],n=e[2];return t===r&&r===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},a.ansi16.rgb=function(e){var t=e%10;if(0===t||7===t)return e>50&&(t+=3.5),[t=t/10.5*255,t,t];var r=.5*(1+~~(e>50));return[(1&t)*r*255,(t>>1&1)*r*255,(t>>2&1)*r*255]},a.ansi256.rgb=function(e){if(e>=232){var t=10*(e-232)+8;return[t,t,t]}var r;return e-=16,[Math.floor(e/36)/5*255,Math.floor((r=e%36)/6)/5*255,r%6/5*255]},a.rgb.hex=function(e){var t=(((255&Math.round(e[0]))<<16)+((255&Math.round(e[1]))<<8)+(255&Math.round(e[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},a.hex.rgb=function(e){var t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var r=t[0];3===t[0].length&&(r=r.split("").map((function(e){return e+e})).join(""));var n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},a.rgb.hcg=function(e){var t,r=e[0]/255,n=e[1]/255,o=e[2]/255,i=Math.max(Math.max(r,n),o),a=Math.min(Math.min(r,n),o),s=i-a;return t=s<=0?0:i===r?(n-o)/s%6:i===n?2+(o-r)/s:4+(r-n)/s+4,t/=6,[360*(t%=1),100*s,100*(s<1?a/(1-s):0)]},a.hsl.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=1,o=0;return(n=r<.5?2*t*r:2*t*(1-r))<1&&(o=(r-.5*n)/(1-n)),[e[0],100*n,100*o]},a.hsv.hcg=function(e){var t=e[1]/100,r=e[2]/100,n=t*r,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},a.hcg.rgb=function(e){var t=e[0]/360,r=e[1]/100,n=e[2]/100;if(0===r)return[255*n,255*n,255*n];var o,i=[0,0,0],a=t%1*6,s=a%1,c=1-s;switch(Math.floor(a)){case 0:i[0]=1,i[1]=s,i[2]=0;break;case 1:i[0]=c,i[1]=1,i[2]=0;break;case 2:i[0]=0,i[1]=1,i[2]=s;break;case 3:i[0]=0,i[1]=c,i[2]=1;break;case 4:i[0]=s,i[1]=0,i[2]=1;break;default:i[0]=1,i[1]=0,i[2]=c}return o=(1-r)*n,[255*(r*i[0]+o),255*(r*i[1]+o),255*(r*i[2]+o)]},a.hcg.hsv=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t),n=0;return r>0&&(n=t/r),[e[0],100*n,100*r]},a.hcg.hsl=function(e){var t=e[1]/100,r=e[2]/100*(1-t)+.5*t,n=0;return r>0&&r<.5?n=t/(2*r):r>=.5&&r<1&&(n=t/(2*(1-r))),[e[0],100*n,100*r]},a.hcg.hwb=function(e){var t=e[1]/100,r=t+e[2]/100*(1-t);return[e[0],100*(r-t),100*(1-r)]},a.hwb.hcg=function(e){var t=e[1]/100,r=1-e[2]/100,n=r-t,o=0;return n<1&&(o=(r-n)/(1-n)),[e[0],100*n,100*o]},a.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]},a.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]},a.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]},a.gray.hsl=a.gray.hsv=function(e){return[0,0,e[0]]},a.gray.hwb=function(e){return[0,100,e[0]]},a.gray.cmyk=function(e){return[0,0,0,e[0]]},a.gray.lab=function(e){return[e[0],0,0]},a.gray.hex=function(e){var t=255&Math.round(e[0]/100*255),r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(r.length)+r},a.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}},function(e,t,r){var n=r(4),o=r(5);"string"==typeof(o=o.__esModule?o.default:o)&&(o=[[e.i,o,""]]);var i={insert:"head",singleton:!1};n(o,i);e.exports=o.locals||{}},function(e,t,r){"use strict";var n,o=function(){return void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n},i=function(){var e={};return function(t){if(void 0===e[t]){var r=document.querySelector(t);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}e[t]=r}return e[t]}}(),a=[];function s(e){for(var t=-1,r=0;r<a.length;r++)if(a[r].identifier===e){t=r;break}return t}function c(e,t){for(var r={},n=[],o=0;o<e.length;o++){var i=e[o],c=t.base?i[0]+t.base:i[0],l=r[c]||0,u="".concat(c," ").concat(l);r[c]=l+1;var h=s(u),p={css:i[1],media:i[2],sourceMap:i[3]};-1!==h?(a[h].references++,a[h].updater(p)):a.push({identifier:u,updater:g(p,t),references:1}),n.push(u)}return n}function l(e){var t=document.createElement("style"),n=e.attributes||{};if(void 0===n.nonce){var o=r.nc;o&&(n.nonce=o)}if(Object.keys(n).forEach((function(e){t.setAttribute(e,n[e])})),"function"==typeof e.insert)e.insert(t);else{var a=i(e.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(t)}return t}var u,h=(u=[],function(e,t){return u[e]=t,u.filter(Boolean).join("\n")});function p(e,t,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(e.styleSheet)e.styleSheet.cssText=h(t,o);else{var i=document.createTextNode(o),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(i,a[t]):e.appendChild(i)}}function f(e,t,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?e.setAttribute("media",o):e.removeAttribute("media"),i&&btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var d=null,y=0;function g(e,t){var r,n,o;if(t.singleton){var i=y++;r=d||(d=l(t)),n=p.bind(null,r,i,!1),o=p.bind(null,r,i,!0)}else r=l(t),n=f.bind(null,r,t),o=function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(r)};return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else o()}}e.exports=function(e,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=o());var r=c(e=e||[],t);return function(e){if(e=e||[],"[object Array]"===Object.prototype.toString.call(e)){for(var n=0;n<r.length;n++){var o=s(r[n]);a[o].references--}for(var i=c(e,t),l=0;l<r.length;l++){var u=s(r[l]);0===a[u].references&&(a[u].updater(),a.splice(u,1))}r=i}}}},function(e,t,r){(t=r(6)(!1)).push([e.i,"body{background-color:#000;display:flex;flex-direction:column;align-items:center;width:100vw;height:100vh;margin:0 0}canvas{background:#000;margin-top:30px}.build{color:#444;font-size:12px;font-family:Menlo;text-align:left;width:100%}",""]),e.exports=t},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var o=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),i=n.sources.map((function(e){return"/*# sourceURL=".concat(n.sourceRoot||"").concat(e," */")}));return[r].concat(i).concat([o]).join("\n")}var a,s,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2]," {").concat(r,"}"):r})).join("")},t.i=function(e,r,n){"string"==typeof e&&(e=[[null,e,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var s=0;s<e.length;s++){var c=[].concat(e[s]);n&&o[c[0]]||(r&&(c[2]?c[2]="".concat(r," and ").concat(c[2]):c[2]=r),t.push(c))}},t}},function(e,t,r){var n=r(1),o=r(8),i={};for(var a in n)n.hasOwnProperty(a)&&(i[n[a]]=a);var s=e.exports={to:{},get:{}};function c(e,t,r){return Math.min(Math.max(t,e),r)}function l(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}s.get=function(e){var t,r;switch(e.substring(0,3).toLowerCase()){case"hsl":t=s.get.hsl(e),r="hsl";break;case"hwb":t=s.get.hwb(e),r="hwb";break;default:t=s.get.rgb(e),r="rgb"}return t?{model:r,value:t}:null},s.get.rgb=function(e){if(!e)return null;var t,r,o,i=[0,0,0,1];if(t=e.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(o=t[2],t=t[1],r=0;r<3;r++){var a=2*r;i[r]=parseInt(t.slice(a,a+2),16)}o&&(i[3]=Math.round(parseInt(o,16)/255*100)/100)}else if(t=e.match(/^#([a-f0-9]{3,4})$/i)){for(o=(t=t[1])[3],r=0;r<3;r++)i[r]=parseInt(t[r]+t[r],16);o&&(i[3]=Math.round(parseInt(o+o,16)/255*100)/100)}else if(t=e.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)){for(r=0;r<3;r++)i[r]=parseInt(t[r+1],0);t[4]&&(i[3]=parseFloat(t[4]))}else{if(!(t=e.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/)))return(t=e.match(/(\D+)/))?"transparent"===t[1]?[0,0,0,0]:(i=n[t[1]])?(i[3]=1,i):null:null;for(r=0;r<3;r++)i[r]=Math.round(2.55*parseFloat(t[r+1]));t[4]&&(i[3]=parseFloat(t[4]))}for(r=0;r<3;r++)i[r]=c(i[r],0,255);return i[3]=c(i[3],0,1),i},s.get.hsl=function(e){if(!e)return null;var t=e.match(/^hsla?\(\s*([+-]?(?:\d*\.)?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},s.get.hwb=function(e){if(!e)return null;var t=e.match(/^hwb\(\s*([+-]?\d*[\.]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/);if(t){var r=parseFloat(t[4]);return[(parseFloat(t[1])%360+360)%360,c(parseFloat(t[2]),0,100),c(parseFloat(t[3]),0,100),c(isNaN(r)?1:r,0,1)]}return null},s.to.hex=function(){var e=o(arguments);return"#"+l(e[0])+l(e[1])+l(e[2])+(e[3]<1?l(Math.round(255*e[3])):"")},s.to.rgb=function(){var e=o(arguments);return e.length<4||1===e[3]?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"},s.to.rgb.percent=function(){var e=o(arguments),t=Math.round(e[0]/255*100),r=Math.round(e[1]/255*100),n=Math.round(e[2]/255*100);return e.length<4||1===e[3]?"rgb("+t+"%, "+r+"%, "+n+"%)":"rgba("+t+"%, "+r+"%, "+n+"%, "+e[3]+")"},s.to.hsl=function(){var e=o(arguments);return e.length<4||1===e[3]?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"},s.to.hwb=function(){var e=o(arguments),t="";return e.length>=4&&1!==e[3]&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"},s.to.keyword=function(e){return i[e.slice(0,3)]}},function(e,t,r){"use strict";var n=r(9),o=Array.prototype.concat,i=Array.prototype.slice,a=e.exports=function(e){for(var t=[],r=0,a=e.length;r<a;r++){var s=e[r];n(s)?t=o.call(t,i.call(s)):t.push(s)}return t};a.wrap=function(e){return function(){return e(a(arguments))}}},function(e,t){e.exports=function(e){return!(!e||"string"==typeof e)&&(e instanceof Array||Array.isArray(e)||e.length>=0&&(e.splice instanceof Function||Object.getOwnPropertyDescriptor(e,e.length-1)&&"String"!==e.constructor.name))}},function(e,t,r){var n=r(2),o=r(11),i={};Object.keys(n).forEach((function(e){i[e]={},Object.defineProperty(i[e],"channels",{value:n[e].channels}),Object.defineProperty(i[e],"labels",{value:n[e].labels});var t=o(e);Object.keys(t).forEach((function(r){var n=t[r];i[e][r]=function(e){var t=function(t){if(null==t)return t;arguments.length>1&&(t=Array.prototype.slice.call(arguments));var r=e(t);if("object"==typeof r)for(var n=r.length,o=0;o<n;o++)r[o]=Math.round(r[o]);return r};return"conversion"in e&&(t.conversion=e.conversion),t}(n),i[e][r].raw=function(e){var t=function(t){return null==t?t:(arguments.length>1&&(t=Array.prototype.slice.call(arguments)),e(t))};return"conversion"in e&&(t.conversion=e.conversion),t}(n)}))})),e.exports=i},function(e,t,r){var n=r(2);function o(e){var t=function(){for(var e={},t=Object.keys(n),r=t.length,o=0;o<r;o++)e[t[o]]={distance:-1,parent:null};return e}(),r=[e];for(t[e].distance=0;r.length;)for(var o=r.pop(),i=Object.keys(n[o]),a=i.length,s=0;s<a;s++){var c=i[s],l=t[c];-1===l.distance&&(l.distance=t[o].distance+1,l.parent=o,r.unshift(c))}return t}function i(e,t){return function(r){return t(e(r))}}function a(e,t){for(var r=[t[e].parent,e],o=n[t[e].parent][e],a=t[e].parent;t[a].parent;)r.unshift(t[a].parent),o=i(n[t[a].parent][a],o),a=t[a].parent;return o.conversion=r,o}e.exports=function(e){for(var t=o(e),r={},n=Object.keys(t),i=n.length,s=0;s<i;s++){var c=n[s];null!==t[c].parent&&(r[c]=a(c,t))}return r}},function(e,t,r){"use strict";r.r(t);r(3);var n,o,i=window.devicePixelRatio||1;n=document.querySelector("#canvas"),o=n.getContext("2d");var a=100,s=34,c=window.innerWidth/a,l=c*i,u=1.2*c*i,h=c*i;n.style.cssText="width: ".concat(c*a,"; height: ").concat(1.2*c*s),n.width=l*a,n.height=u*s,o.font="normal ".concat(h,"px ").concat("Menlo"),o.textAlign="center",o.textBaseline="middle";var p=function(e,t){"transparent"!==e&&(o.fillStyle=e.hsl().string("hsla"),o.fillRect(t.x*l,t.y*u,l,u))},f=function(e,t,r){o.fillStyle=t.hsl().string("hsla"),o.fillText(e,r.x*l+l/2,r.y*u+u/2)},d={userInput:null,playerTurn:!0,turn:0};function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){var r=t.get(e);if(!r)throw new TypeError("attempted to get private field on non-instance");return r.get?r.get.call(e):r.value}function b(e,t,r){var n=t.get(e);if(!n)throw new TypeError("attempted to set private field on non-instance");if(n.set)n.set.call(e,r);else{if(!n.writable)throw new TypeError("attempted to set read only private field");n.value=r}return r}const v=(e,t)=>{if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");t={pascalCase:!1,...t};return 0===(e=Array.isArray(e)?e.map(e=>e.trim()).filter(e=>e.length).join("-"):e.trim()).length?"":1===e.length?t.pascalCase?e.toLocaleUpperCase():e.toLocaleLowerCase():(e!==e.toLocaleLowerCase()&&(e=(e=>{let t=!1,r=!1,n=!1;for(let o=0;o<e.length;o++){const i=e[o];t&&/[\p{Lu}]/u.test(i)?(e=e.slice(0,o)+"-"+e.slice(o),t=!1,n=r,r=!0,o++):r&&n&&/[\p{Ll}]/u.test(i)?(e=e.slice(0,o-1)+"-"+e.slice(o-1),n=r,r=!1,t=!0):(t=i.toLocaleLowerCase()===i&&i.toLocaleUpperCase()!==i,n=r,r=i.toLocaleUpperCase()===i&&i.toLocaleLowerCase()!==i)}return e})(e)),e=e.replace(/^[_.\- ]+/,"").toLocaleLowerCase().replace(/[_.\- ]+([\p{Alpha}\p{N}_]|$)/gu,(e,t)=>t.toLocaleUpperCase()).replace(/\d+([\p{Alpha}\p{N}_]|$)/gu,e=>e.toLocaleUpperCase()),r=e,t.pascalCase?r.charAt(0).toLocaleUpperCase()+r.slice(1):r);var r};var m=v,w=v;m.default=w;class M{constructor(e){y(this,"component",void 0),this.component=e}get ecs(){return this.component.ecs}get descriptor(){return{enumerable:!0,get:()=>this.get(),set:e=>this.set(e)}}get(){}set(e){}serialize(){}onDestroyed(){}cleanupReference(e){}}class k extends M{constructor(...e){super(...e),y(this,"value",null)}set(e){this.value=e}get(){return this.value}serialize(){return this.value}}class x extends M{constructor(...e){super(...e),y(this,"id",void 0)}set(e){return!this.id||e&&e.id===this.id&&e===this.id||this.ecs.entities.removeRef(this.id,this),e&&e.id?(this.ecs.entities.addRef(e.id,this),void(this.id=e.id)):"string"==typeof e?(this.ecs.entities.addRef(e,this),void(this.id=e)):void(this.id=void 0)}get(){return this.id&&this.component.ecs.getEntity(this.id)}serialize(){return this.id}onDestroyed(){this.id&&this.ecs.entities.removeRef(this.id,this)}cleanupReference(e){this.id===e.id?this.id=void 0:console.warn(`Property in unclean state. A reference to an entity "${e.id}" was never cleaned up.`)}}class A extends M{constructor(e){super(e),y(this,"proxy",[]),this.proxy=new Proxy([],{get:(e,t,r)=>Reflect.get(e,t,r),set:(e,t,r,n)=>{if(isNaN(t))return Reflect.set(e,t,r,n);const o=Reflect.get(e,t,n);return"string"==typeof r&&(r=this.ecs.entities.get(r)),o&&o!=r&&this.ecs.entities.removeRef(r,this),r&&r.id?(this.ecs.entities.addRef(r.id,this),Reflect.set(e,t,r,n)):Reflect.set(e,t,r,n)},deleteProperty:(e,t)=>{if(isNaN(t))return Reflect.deleteProperty(e,t);const r=Reflect.get(e,t);return this.ecs.entities.removeRef(r,this),Reflect.deleteProperty(e,t)}})}set(e=[]){const t=Math.max(e.length,this.proxy.length);for(let r=0;r<t;r++)r in e?this.proxy[r]=e[r]:delete this.proxy[r];this.proxy.length=e.length}get(){return this.proxy}serialize(){return this.proxy.map(e=>e.id)}onDestroyed(){this.set([])}cleanupReference(e){this.set(this.proxy.filter(t=>t.id!==e.id))}}class O{static create(e,t){switch(t){case"<Entity>":return new x(e);case"<EntityArray>":return new A(e);default:return new k(e)}}}class E{static get type(){return this.name}get entity(){return g(this,j)}get ecs(){return g(this,C)}get type(){return this.constructor.name}get isAttached(){return Boolean(this.entity)}get isDestroyed(){return g(this,_)}get allowMultiple(){return this.constructor.allowMultiple}get keyProperty(){return this.constructor.keyProperty}get properties(){const e={};for(const[t,r]of Object.entries(g(this,P)))e[t]=r.get();return e}get key(){return this[this.keyProperty]}constructor(e,t={}){j.set(this,{writable:!0,value:null}),C.set(this,{writable:!0,value:null}),P.set(this,{writable:!0,value:{}}),_.set(this,{writable:!0,value:!1}),b(this,C,e),this._defineProxies(t)}serialize(){return Object.entries(g(this,P)).reduce((e,[t,r])=>({...e,[t]:r.serialize()}),{})}_onAttached(e){b(this,j,e),this.ecs.queries.onComponentAdded(e,this),this.onAttached()}_onDetached(){if(this.isAttached){this.onDetached();const e=g(this,j);b(this,j,null),this.ecs.queries.onComponentRemoved(e,this)}}_onDestroyed(){b(this,_,!0),this.onDestroyed();for(const e of Object.values(g(this,P)))e.onDestroyed()}onAttached(){}onDetached(){}onDestroyed(){}remove(e=!0){this.isAttached&&this.entity.remove(this),e&&this._onDestroyed()}destroy(){this.remove(!0)}_onEvent(e){this.onEvent(e);const t=m("on "+e.name);"function"==typeof this[t]&&this[t](e)}onEvent(e){}_defaultPropertyValue(e){const t=this.constructor.properties[e];return"<EntityArray>"===t?[]:"<Entity>"!==t?t:void 0}_defineProxies(e){for(const t in this.constructor.properties){const r=e.hasOwnProperty(t)?e[t]:this._defaultPropertyValue(t),n=O.create(this,this.constructor.properties[t]);g(this,P)[t]=n,Object.defineProperty(this,t,n.descriptor),n.set(r)}}}var j=new WeakMap,C=new WeakMap,P=new WeakMap,_=new WeakMap;y(E,"allowMultiple",!1),y(E,"keyProperty",null),y(E,"properties",{});class D{constructor(e){R.set(this,{writable:!0,value:new Map}),S.set(this,{writable:!0,value:new Map}),z.set(this,{writable:!0,value:null}),b(this,z,e)}register(e){g(this,S).set(e.name,e),g(this,R).set(e.name,m(e.name))}getAccessor(e){if(g(this,R).has(e))return g(this,R).get(e);g(this,R).set(e,m(e))}get(e){const t=this._getType(e);return t?g(this,S).get(t):(console.warn(`Cannot get component definition for type or class ${e} since it is neither a Component class or type (string)`),null)}create(e,t={}){const r=this.get(e);if(r)return new r(g(this,z),t);console.warn(`Could not create component definition for ${e} since it is not registered`)}_getType(e){return"string"==typeof e?e:e instanceof E?e.type:e.prototype instanceof E?e.name:null}}var R=new WeakMap,S=new WeakMap,z=new WeakMap,T=function(e){return function(e){return!!e&&"object"==typeof e}(e)&&!function(e){var t=Object.prototype.toString.call(e);return"[object RegExp]"===t||"[object Date]"===t||function(e){return e.$$typeof===I}(e)}(e)};var I="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function $(e,t){return!1!==t.clone&&t.isMergeableObject(e)?N((r=e,Array.isArray(r)?[]:{}),e,t):e;var r}function F(e,t,r){return e.concat(t).map((function(e){return $(e,r)}))}function q(e){return Object.keys(e).concat(function(e){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(e).filter((function(t){return e.propertyIsEnumerable(t)})):[]}(e))}function L(e,t){try{return t in e}catch(e){return!1}}function W(e,t,r){var n={};return r.isMergeableObject(e)&&q(e).forEach((function(t){n[t]=$(e[t],r)})),q(t).forEach((function(o){(function(e,t){return L(e,t)&&!(Object.hasOwnProperty.call(e,t)&&Object.propertyIsEnumerable.call(e,t))})(e,o)||(L(e,o)&&r.isMergeableObject(t[o])?n[o]=function(e,t){if(!t.customMerge)return N;var r=t.customMerge(e);return"function"==typeof r?r:N}(o,r)(e[o],t[o],r):n[o]=$(t[o],r))})),n}function N(e,t,r){(r=r||{}).arrayMerge=r.arrayMerge||F,r.isMergeableObject=r.isMergeableObject||T,r.cloneUnlessOtherwiseSpecified=$;var n=Array.isArray(t);return n===Array.isArray(e)?n?r.arrayMerge(e,t,r):W(e,t,r):$(t,r)}N.all=function(e,t){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce((function(e,r){return N(e,r,t)}),{})};var U=N;class B{get type(){return this.componentDef.type}constructor(e,t={},r=!0){this.componentDef=e,this.properties=t,this.overwrite=r}applyToEntity(e,t={}){if(!this.componentDef.allowMultiple&&e.has(this.componentDef)){if(!this.overwrite)return void console.log(`Ignoring prefab component "${this.type}" since the entity "${e.id}" already has one.`);e.remove(this.componentDef)}const r=U(this.properties,t);e.add(this.componentDef,r)}}class G{constructor(e,t){y(this,"name",""),y(this,"inherit",[]),y(this,"components",[]),this.ecs=e,this.name=t}addComponent(e){this.components.push(e)}applyToEntity(e,t={}){this.inherit.forEach(r=>{r.applyToEntity(e,t)});const r={};return this.components.forEach((n,o)=>{const i=n.componentDef,a=this.ecs.components.getAccessor(i.type);let s={};if(i.allowMultiple)if(i.keyProperty){const e=n.properties[i.keyProperty];t[a]&&t[a][e]&&(s=t[a][e])}else r[a]||(r[a]=0),t[a]&&t[a][r[a]]&&(s=t[a][r[a]]),r[a]++;else s=t[a];n.applyToEntity(e,s)}),e}}class V{constructor(e){J.set(this,{writable:!0,value:{}}),H.set(this,{writable:!0,value:null}),b(this,H,e)}deserialize(e){const t=this.get(e.name);if(t)return t;const r=new G(g(this,H),e.name);let n;n=Array.isArray(e.inherit)?e.inherit:"string"==typeof e.inherit?[e.inherit]:[],r.inherit=n.map(t=>{const r=this.get(t);return r||(console.warn(`Prefab "${e.name}" cannot inherit from Prefab "${t}" because is not registered yet! Prefabs must be registered in the right order.`),t)});const o=e.components||[];for(const t of o)if("string"==typeof t||t.prototype instanceof E){const e=g(this,H).components.get(t);e&&r.addComponent(new B(e))}else if("object"==typeof t){const e=t.type,n=g(this,H).components.get(e);n&&r.addComponent(new B(n,t.properties,t.overwrite))}else console.warn(`Unrecognized component reference "${t}" in prefab "${e.name}". Ensure the component is registered before the prefab.`);return this.register(r),r}register(e){g(this,J)[e.name]=e}get(e){const t=V._getName(e);return g(this,J)[t]}create(e,t={}){const r=this.get(e);if(!r)return void console.warn(`Could not instantiate prefab for ${e} since it is not registered`);const n=g(this,H).createEntity();return r.applyToEntity(n,t),n}static _getName(e){return"string"==typeof e?e:e instanceof G||e.prototype instanceof G?e.name:null}}var J=new WeakMap,H=new WeakMap;class Q{get prevented(){return g(this,K)}get handled(){return g(this,X)}constructor(e,t={}){y(this,"data",{}),K.set(this,{writable:!0,value:!1}),X.set(this,{writable:!0,value:!1}),this.name=e,this.data=t}is(e){return this.name===e}handle(){b(this,X,!0),b(this,K,!0)}prevent(){b(this,K,!0)}}var K=new WeakMap,X=new WeakMap;class Y{get ecs(){return g(this,te)}get components(){return g(this,ee)}get isDestroyed(){return g(this,re)}constructor(e,t=null){Z.set(this,{writable:!0,value:null}),ee.set(this,{writable:!0,value:{}}),te.set(this,{writable:!0,value:null}),re.set(this,{writable:!0,value:!1}),b(this,te,e),b(this,Z,t||e.generateId()),Object.defineProperty(this,"id",{value:g(this,Z),enumerable:!0,writable:!1})}has(e,t=null){const r=this.ecs.components._getType(e),n=this.ecs.components.getAccessor(r),o=this.hasOwnProperty(n);return o&&t?this[n].hasOwnProperty(t):o}get(e,t=null){const r=this.ecs.components._getType(e),n=this[this.ecs.components.getAccessor(r)];return n&&t?n[t]:n}destroy(){b(this,re,!0);for(const e of Object.values(this.components))if(e instanceof E)e.destroy();else for(const t of Object.values(e))t.destroy();this.ecs.entities.onEntityDestroyed(this)}add(e,t={}){const r=this.ecs.components.create(e,t);return r?this.attach(r):(console.warn(`"${e}" component cannot be added, since it is not registered.`),!1)}attach(e){const t=this.ecs.components.getAccessor(e.type);return e.allowMultiple?e.keyProperty?e.key?(this.components[t]||(this.components[t]={},Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get(){return this.components[t]}})),this.components[t][e.key]=e,e._onAttached(this),this.ecs.queries.onComponentAdded(this,e),!0):(console.warn(`"${e.type}" component has a falsy key of "${e.key}". The keyProperty is set to "${e.keyProperty}".`),!1):(this.components[t]||(this.components[t]=[],Object.defineProperty(this,t,{configurable:!0,enumerable:!0,get(){return this.components[t]}})),this.components[t].push(e),e._onAttached(this),this.ecs.queries.onComponentAdded(this),!0):this.has(e.type)?(console.warn(`"${e.type}" component has allowMultiple set to ${e.allowMultiple}. Trying to add a "${e.type}" component to an entity which already has one.`),!1):(this.components[t]=e,Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get(){return this.components[t]}}),e._onAttached(this),this.ecs.queries.onComponentAdded(this),!0)}owns(e){return e.entity===this}remove(e,t=null){const r=e instanceof E;t=r?e.key:t;const n=this.ecs.components.get(e),o=this.ecs.components.getAccessor(n.type);if(n.allowMultiple){if(!n.keyProperty){if(!r){for(const e of this.components[o])e._onDetached();return delete this[o],delete this.components[o],this.ecs.queries.onComponentRemoved(this),!0}{const t=this.components[o];if(!t)return void console.warn(`Trying to remove a "${n.type}" component from an entity, but it wasn't found.`);const r=t.indexOf(e);if(r>-1)return t.splice(r,1),e._onDetached(),0===t.length&&(delete this[o],delete this.components[o]),this.ecs.queries.onComponentRemoved(this),!0}}if(!t)return void console.warn(`Trying to remove a "${n.type}" component which allows multiple without specifying an key.`);const i=this.components[o],a=i[t];return a?(delete i[t],a._onDetached(),Object.keys(i).length<=0&&(delete this[o],delete this.components[o]),this.ecs.queries.onComponentRemoved(this),a):void console.warn(`Trying to remove a "${n.type}" component from an entity at "${t}", but it wasn't found.`)}if(o in this){const e=this.components[o];return delete this[o],delete this.components[o],e._onDetached(),this.ecs.queries.onComponentRemoved(this),e}console.warn(`Trying to remove a "${n.type}" component from an entity, but it wasn't found.`)}serialize(){return Object.entries(this.components).reduce((e,[t,r])=>r instanceof E?{...e,[t]:r.serialize()}:Array.isArray(r)?{...e,[t]:r.map(e=>e.serialize())}:{...e,[t]:Object.entries(r).reduce((e,[t,r])=>({...e,[t]:r.serialize()}),{})},{id:this.id})}fireEvent(e,t){const r=new Q(e,t);for(const e of Object.values(this.components))if(e instanceof E){if(e._onEvent(r),r.prevented)return r}else for(const t of Object.values(e))if(t._onEvent(r),r.prevented)return r;return r}}var Z=new WeakMap,ee=new WeakMap,te=new WeakMap,re=new WeakMap;class ne{constructor(e){oe.set(this,{writable:!0,value:new Map}),ie.set(this,{writable:!0,value:null}),ae.set(this,{writable:!0,value:new Map}),b(this,ie,e)}get all(){return g(this,oe).values()}register(e){return g(this,oe).set(e.id,e),e}get(e){return g(this,oe).get(e)}createOrGetById(e){const t=this.get(e);return t||this.create(e)}create(e){const t=new Y(g(this,ie),e);return this.register(t),g(this,ie).queries.onEntityCreated(t),t}destroy(e){e.destroy()}onEntityDestroyed(e){this.cleanupRefs(e),g(this,oe).delete(e.id),g(this,ie).queries.onEntityDestroyed(e)}cleanupRefs(e){const t=g(this,ae).get(e.id);if(t){for(const r of t)r.cleanupReference(e);delete g(this,ae)[e.id]}}addRef(e,t){g(this,ae).has(e)?g(this,ae).get(e).add(t):g(this,ae).set(e,new Set([t]))}removeRef(e,t){g(this,ae).has(e)&&g(this,ae).get(e).delete(t)}serialize(){const e=[];return g(this,oe).forEach(t=>{e.push(t.serialize())}),e}deserialize(e){for(const t of e.entities)this.createOrGetById(t.id);for(const t of e.entities)this.deserializeEntity(t)}deserializeEntity(e){const{id:t,...r}=e,n=this.createOrGetById(t);Object.entries(r).forEach(([e,t])=>{const r=m(e,{pascalCase:!0}),o=g(this,ie).components.get(r);o.allowMultiple?Object.values(t).forEach(e=>{n.add(o,e)}):n.add(o,t)})}}var oe=new WeakMap,ie=new WeakMap,ae=new WeakMap;class se{constructor(e,t={}){ce.set(this,{writable:!0,value:void 0}),le.set(this,{writable:!0,value:void 0}),ue.set(this,{writable:!0,value:new Set}),b(this,ce,e),b(this,le,U({any:[],all:[],none:[]},t)),this.bustCache()}isMatch(e){const t=!g(this,le).any.length||g(this,le).any.some(t=>e.has(t)),r=g(this,le).all.every(t=>e.has(t)),n=!g(this,le).none.some(t=>e.has(t));return t&&r&&n}candidate(e){return this.isMatch(e)?(g(this,ue).add(e),!0):(g(this,ue).delete(e),!1)}_onEntityCreated(e){this.candidate(e)}_onComponentAdded(e){this.candidate(e)}_onComponentRemoved(e){this.candidate(e)}_onEntityDestroyed(e){g(this,ue).delete(e)}bustCache(){g(this,ue).clear();for(const e of g(this,ce).entities.all)this.candidate(e);return g(this,ue)}get(){return g(this,ue)}}var ce=new WeakMap,le=new WeakMap,ue=new WeakMap;class he{constructor(e){pe.set(this,{writable:!0,value:void 0}),fe.set(this,{writable:!0,value:[]}),b(this,pe,e)}create(e){const t=new se(g(this,pe),e);return g(this,fe).push(t),t}onComponentAdded(e){g(this,fe).forEach(t=>t._onComponentAdded(e))}onComponentRemoved(e){g(this,fe).forEach(t=>t._onComponentRemoved(e))}onEntityCreated(e){g(this,fe).forEach(t=>t._onEntityCreated(e))}onEntityDestroyed(e){g(this,fe).forEach(t=>t._onEntityDestroyed(e))}}var pe=new WeakMap,fe=new WeakMap;var de=r(0),ye=r.n(de),ge={defaultColor:ye()("#ff0077"),defaultBGColor:ye()("#000"),inventoryHighlight:ye()("#A9CCE3"),torchLight:ye()("#FFD00E"),campfire:ye()("#FFD00E"),fountain:ye()("#3366FF"),armor:ye()("#DAA520"),bandage:ye()("#F7DC6F"),chest:ye()("#DAA520"),currency:ye()("#DAA520"),multipleItems:ye()("#DAA520"),potion:ye()("#DAA520"),weapon:ye()("#DAA520"),hudText:ye()("#fff"),healthBar:ye()("#B91906"),wall:ye()("#AAA"),floor:ye()("#555"),cavernFloor:ye()("#71331E"),stairsUp:ye()("#AAA"),stairsDown:ye()("#AAA"),player:ye()("#FFF"),goblin:ye()("#0C9"),rat:ye()("#F1948A")};function be(e){return(be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function me(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Me(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=xe(e);if(t){var o=xe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return ke(this,r)}}function ke(e,t){return!t||"object"!==be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Oe=new class{constructor(){this.idGenerator=()=>((e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),this.components=new D(this),this.prefabs=new V(this),this.entities=new ne(this),this.queries=new he(this)}generateId(){return this.idGenerator()}createEntity(){return this.entities.create()}createPrefab(e,t={}){return this.prefabs.create(e,t)}destroyEntity(e){return this.entities.destroy(e)}registerPrefab(e){this.prefabs.deserialize(e)}registerComponent(e){this.components.register(e)}getEntity(e){return this.entities.get(e)}createComponent(e,t){return this.components.create(e,t)}createQuery(e){return this.queries.create(e)}serialize(){return{entities:this.entities.serialize()}}deserialize(e){return e.id?this.entities.deserializeEntity(e):this.entities.deserialize(e)}},Ee=function(e){me(r,e);var t=Me(r);function r(){return ve(this,r),t.apply(this,arguments)}return r}(E);Ae(Ee,"properties",{x:0,y:0});var je=function(e){me(r,e);var t=Me(r);function r(){return ve(this,r),t.apply(this,arguments)}return r}(E);Ae(je,"properties",{color:ge.defaultColor,char:"?",background:"transparent",layer:100}),Oe.registerComponent(Ee),Oe.registerComponent(je);var Ce=Oe.createEntity();Ce.add(Ee),Ce.add(je,{char:"@",color:ge.player});var Pe=Oe,_e=function(){o.clearRect(0,0,n.width,n.height),Pe.createQuery(Pe,{all:[je]}).get().forEach((function(e){!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};console.log("drawCell");var r=t.fg,n=t.bg,o=t.x,i=t.y,a=e.appearance,s=a.char,c=a.background,l=a.color,u=e.position,h=n||c,d=r||l,y=o&&i?{x:o,y:i}:u;p(h,y),f(s,d,y)}(e)}))};function De(){_e()}function Re(){d.userInput&&d.playerTurn&&(!function(){if(d.userInput){var e=d.userInput,t=e.key,r=e.type,n=e.payload;console.log({key:t,type:r,payload:n,raw:d.userInput})}}(),De(),d.userInput=null,d.turn=d.turn+=1,d.playerTurn=!1),d.playerTurn||(De(),d.playerTurn=!0)}document.addEventListener("keydown",(function(e){return function(e){switch(e){case"z":d.userInput={key:e,type:"REST",payload:{}};break;case"ArrowUp":d.userInput={key:e,type:"MOVE",payload:{x:0,y:-1}};break;case"ArrowDown":d.userInput={key:e,type:"MOVE",payload:{x:0,y:1}};break;case"ArrowLeft":d.userInput={key:e,type:"MOVE",payload:{x:-1,y:0}};break;case"ArrowRight":d.userInput={key:e,type:"MOVE",payload:{x:1,y:0}};break;case"Escape":d.userInput={key:e,type:"ESCAPE",payload:{}}}}(e.key)})),console.log(Pe.serialize()),De(),requestAnimationFrame((function e(){Re(),requestAnimationFrame(e)}))}]);
//# sourceMappingURL=main.ce52f5ce90e2f6836007.js.map